---
phase: 06-review-pre-analysis
plan: 02
type: execute
wave: 2
depends_on:
  - 06-01
files_modified:
  - src/ui/views/ReviewBriefingView.tsx
  - src/ui/layout/MainPane.tsx
  - src/ui/layout/layout.css
  - src/storage/review-session.ts
  - src/ui/signals/store.ts
  - src/ui/components/AIOrb.tsx
autonomous: true
requirements:
  - AIRV-02
  - AIRV-05
  - AIGN-01

must_haves:
  truths:
    - "Opening the weekly review shows an AI-generated briefing with summary sentence, sectioned cards for stale items / projects missing next actions / compression candidates, and metadata chips per item"
    - "Briefing cards have frosted glass appearance distinct from user-authored atoms, with AI badge"
    - "Items within briefing cards are tappable and inline-expand with quick action buttons"
    - "Closing a review mid-way and reopening within 24 hours shows a Resume prompt that restores the briefing, expanded items, addressed items, and scroll position"
    - "Orb shows a subtle badge dot when an incomplete review session exists"
    - "Only the 4 most recent review briefings are kept — older ones auto-delete"
  artifacts:
    - path: "src/ui/views/ReviewBriefingView.tsx"
      provides: "Full-screen review briefing view"
      min_lines: 150
    - path: "src/storage/review-session.ts"
      provides: "Review session persistence via Dexie config table"
      exports: ["saveReviewSession", "loadReviewSession", "clearReviewSession", "ReviewSession", "REVIEW_SESSION_KEY"]
    - path: "src/ui/layout/layout.css"
      provides: "Frosted glass card CSS for analysis artifacts"
      contains: "backdrop-filter"
  key_links:
    - from: "src/ui/views/ReviewBriefingView.tsx"
      to: "src/ui/signals/store.ts"
      via: "reads state.reviewBriefing, state.reviewStatus, state.reviewProgress"
      pattern: "state\\.review"
    - from: "src/ui/layout/MainPane.tsx"
      to: "src/ui/views/ReviewBriefingView.tsx"
      via: "activePage === 'review' routes to ReviewBriefingView"
      pattern: "ReviewBriefingView"
    - from: "src/storage/review-session.ts"
      to: "src/storage/db.ts"
      via: "db.config.put/get/delete for session persistence"
      pattern: "db\\.config"
    - from: "src/ui/signals/store.ts"
      to: "src/storage/review-session.ts"
      via: "saveReviewSession on briefing complete, loadReviewSession on READY"
      pattern: "saveReviewSession|loadReviewSession"
---

<objective>
Build the ReviewBriefingView full-screen UI, implement session persistence with 24-hour resume, wire the review route in MainPane, and add the orb badge dot for pending reviews.

Purpose: Delivers the user-facing review briefing experience (AIRV-02), session resume capability (AIRV-05), and the visual treatment for analysis artifacts (AIGN-01). After this plan, users can tap Review in the orb, see an AI briefing with frosted glass cards, interact with items via inline expand + quick actions, close and resume the review, and see a badge dot on the orb for pending reviews.

Output: ReviewBriefingView.tsx, review-session.ts, frosted glass CSS, MainPane routing update, store session hydration, orb badge dot.
</objective>

<execution_context>
@C:/Users/patri/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/patri/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-review-pre-analysis/06-CONTEXT.md
@.planning/phases/06-review-pre-analysis/06-RESEARCH.md
@.planning/phases/06-review-pre-analysis/06-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: ReviewBriefingView + MainPane routing + frosted glass CSS</name>
  <files>
    src/ui/views/ReviewBriefingView.tsx
    src/ui/layout/MainPane.tsx
    src/ui/layout/layout.css
  </files>
  <action>
**1. Create ReviewBriefingView (`src/ui/views/ReviewBriefingView.tsx`):**

A full-screen view (like TodayPage or InboxView) that renders the briefing result from `state.reviewBriefing`. Per CONTEXT.md locked decisions:
- No "Start Review" button — the briefing itself IS the experience
- AI-written summary sentence at top
- Below: sectioned cards (stale tasks, projects missing next actions, compression candidates)
- Each card has header with count badge
- Items show atom title + metadata chips (staleness days, link count, entropy score)
- Items are tappable — inline expand with quick action buttons (defer, archive, add next action)
- Frosted glass card appearance

```typescript
import { createSignal, Show, For, createEffect, onCleanup } from 'solid-js';
import { state, sendCommand, cancelReviewBriefing } from '../signals/store';
import type { BriefingItem } from '../../ai/analysis';
```

Component structure:

a) **Loading state** (`state.reviewStatus === 'analyzing'`): Show a progress view with the incremental progress messages from `state.reviewProgress`. Animate text appearing line by line. Include a Cancel button that calls `cancelReviewBriefing()`.

b) **Error state** (`state.reviewStatus === 'error'`): Show error message from `state.reviewError` with a Retry button that calls `startReviewBriefing()`.

c) **Ready state** (`state.reviewStatus === 'ready' && state.reviewBriefing`):

Render the briefing:

```tsx
<div class="review-briefing">
  {/* AI summary sentence */}
  <div class="review-briefing-summary analysis-card">
    <span class="analysis-ai-badge">AI</span>
    <p class="review-briefing-summary-text">{state.reviewBriefing!.summaryText}</p>
  </div>

  {/* Stale items section */}
  <Show when={state.reviewBriefing!.staleItems.length > 0}>
    <BriefingSection
      title="Stale Items"
      count={state.reviewBriefing!.staleItems.length}
      items={state.reviewBriefing!.staleItems}
      renderChips={(item) => [
        item.staleDays ? `${item.staleDays}d stale` : null,
        item.linkCount !== undefined ? `${item.linkCount} links` : null,
        item.entropyScore !== undefined ? `Score: ${Math.round(item.entropyScore)}` : null,
      ].filter(Boolean)}
      onDefer={handleDefer}
      onArchive={handleArchive}
      onAddNextAction={handleAddNextAction}
      expandedIds={expandedIds}
      addressedIds={addressedIds}
      onToggleExpand={toggleExpand}
    />
  </Show>

  {/* Projects missing next actions */}
  <Show when={state.reviewBriefing!.projectsMissingNextAction.length > 0}>
    <BriefingSection
      title="Projects Missing Next Actions"
      count={state.reviewBriefing!.projectsMissingNextAction.length}
      items={state.reviewBriefing!.projectsMissingNextAction}
      renderChips={() => []}
      onAddNextAction={handleAddNextAction}
      expandedIds={expandedIds}
      addressedIds={addressedIds}
      onToggleExpand={toggleExpand}
    />
  </Show>

  {/* Compression candidates */}
  <Show when={state.reviewBriefing!.compressionCandidates.length > 0}>
    <BriefingSection
      title="Compression Candidates"
      count={state.reviewBriefing!.compressionCandidates.length}
      items={state.reviewBriefing!.compressionCandidates}
      renderChips={(item) => [
        item.staleDays ? `${item.staleDays}d stale` : null,
      ].filter(Boolean)}
      onArchive={handleArchive}
      expandedIds={expandedIds}
      addressedIds={addressedIds}
      onToggleExpand={toggleExpand}
    />
  </Show>
</div>
```

d) **BriefingSection**: A helper component (within the same file or as an unexported function component) that renders a frosted glass card with:
- Header: title + count badge (e.g., "Stale Items (14)")
- `<For each={items}>` rendering each BriefingItem:
  - Atom title text
  - Metadata chips (styled as small pill badges with muted colors)
  - Addressed state: if atomId is in addressedIds, show checkmark icon and muted opacity
  - Click handler: toggle expand
  - When expanded: show quick action buttons based on section type:
    - Stale items: "Defer" (updates updated_at to now), "Archive" (sets status archived)
    - Projects: "Add Next Action" (creates inbox item for that project)
    - Compression: "Archive"
  - Quick actions use `sendCommand()` directly (e.g., UPDATE_ATOM, CREATE_INBOX_ITEM)

e) **State management**: Use local signals for `expandedIds` (`createSignal<Set<string>>(new Set())`) and `addressedIds` (`createSignal<Set<string>>(new Set())`). When a quick action is executed on an item, add its atomId to addressedIds.

f) **Scroll position**: Use a ref on the scrollable container. Store scroll position in a local signal. (Session persistence will read this in Task 2.)

g) **Empty briefing**: If all three lists are empty, show a celebratory "Your system is in great shape!" message with the summary sentence.

**2. Update MainPane routing (`src/ui/layout/MainPane.tsx`):**

Import ReviewBriefingView:
```typescript
import { ReviewBriefingView } from '../views/ReviewBriefingView';
```

Replace the `'review'` Match case. The old ReviewView (compression triage) should still be accessible but ReviewBriefingView takes over the `review` route:
```tsx
<Match when={state.activePage === 'review'}>
  <ReviewBriefingView />
</Match>
```

Keep the `ReviewView` import for now (Phase 7 will re-integrate it), but it's no longer used as a direct route target. Remove or comment out the old ReviewView import if it causes unused-import warnings.

**3. Add frosted glass CSS (`src/ui/layout/layout.css`):**

Add a new Phase 6 CSS section. Per CONTEXT.md locked decision: frosted/glass card appearance, semi-transparent, distinct from solid user-authored cards.

```css
/* ======================== Phase 6: Review Briefing ======================== */

.review-briefing {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  max-width: 640px;
  margin: 0 auto;
  overflow-y: auto;
  height: 100%;
}

/* AI summary sentence at top */
.review-briefing-summary {
  padding: 20px;
  text-align: center;
}
.review-briefing-summary-text {
  margin: 0;
  font-size: 15px;
  line-height: 1.5;
  color: var(--text-primary);
}

/* Frosted glass card — shared by all analysis artifacts */
.analysis-card {
  background: rgba(22, 27, 34, 0.65);
  border: 1px solid rgba(88, 166, 255, 0.2);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-radius: 12px;
  position: relative;
}

.analysis-ai-badge {
  position: absolute;
  top: 8px;
  right: 10px;
  font-size: 10px;
  color: var(--accent);
  opacity: 0.7;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  font-weight: 600;
}

/* Briefing section card */
.briefing-section {
  padding: 16px;
}
.briefing-section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}
.briefing-section-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}
.briefing-section-count {
  background: var(--accent);
  color: var(--bg-primary);
  border-radius: 10px;
  padding: 1px 8px;
  font-size: 11px;
  font-weight: 600;
}

/* Briefing item row */
.briefing-item {
  display: flex;
  flex-direction: column;
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.15s ease;
}
.briefing-item:hover {
  background: rgba(255, 255, 255, 0.05);
}
.briefing-item--addressed {
  opacity: 0.5;
}
.briefing-item-row {
  display: flex;
  align-items: center;
  gap: 8px;
}
.briefing-item-title {
  flex: 1;
  font-size: 13px;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.briefing-item-check {
  color: var(--status-success);
  font-size: 14px;
}

/* Metadata chips */
.briefing-chips {
  display: flex;
  gap: 6px;
  margin-top: 4px;
  flex-wrap: wrap;
}
.briefing-chip {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-secondary);
}

/* Expanded item actions */
.briefing-item-actions {
  display: flex;
  gap: 8px;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
}
.briefing-action-btn {
  font-size: 12px;
  padding: 4px 12px;
  border-radius: 6px;
  border: 1px solid var(--border-primary);
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  transition: background 0.15s, color 0.15s;
}
.briefing-action-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

/* Progress indicator during analysis */
.review-briefing-progress {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 16px;
  padding: 32px;
}
.review-progress-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--border-primary);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
.review-progress-messages {
  display: flex;
  flex-direction: column;
  gap: 6px;
  text-align: center;
}
.review-progress-msg {
  font-size: 13px;
  color: var(--text-secondary);
  animation: fadeIn 0.3s ease;
}
.review-progress-msg:last-child {
  color: var(--text-primary);
  font-weight: 500;
}

/* Cancel button in progress view */
.review-cancel-btn {
  margin-top: 12px;
  font-size: 12px;
  padding: 6px 16px;
  border-radius: 6px;
  border: 1px solid var(--border-primary);
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
}

/* Error state */
.review-briefing-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 12px;
  padding: 32px;
  text-align: center;
}
.review-error-msg {
  color: var(--status-critical);
  font-size: 14px;
}

/* Orb review badge dot */
.ai-orb-review-badge {
  position: absolute;
  top: -2px;
  right: -2px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--accent);
  border: 2px solid var(--bg-primary);
  z-index: 1;
}

/* Empty briefing celebration */
.review-briefing-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 12px;
  padding: 32px;
  text-align: center;
}
.review-briefing-empty-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--status-success);
}

/* Resume warning banner */
.review-resume-banner {
  padding: 10px 16px;
  background: rgba(255, 200, 50, 0.1);
  border: 1px solid rgba(255, 200, 50, 0.25);
  border-radius: 8px;
  font-size: 12px;
  color: var(--text-secondary);
  text-align: center;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}
```
  </action>
  <verify>
- `npx tsc --noEmit` passes
- ReviewBriefingView.tsx exists and exports a component
- MainPane.tsx routes `activePage === 'review'` to ReviewBriefingView
- layout.css contains `.analysis-card` with `backdrop-filter: blur`
- layout.css contains `.ai-orb-review-badge` class
  </verify>
  <done>
- ReviewBriefingView renders summary sentence, three sectioned frosted glass cards, metadata chips, and inline-expand quick actions
- MainPane routes 'review' page to ReviewBriefingView (replacing old ReviewView)
- Frosted glass CSS applied to analysis cards with AI badge
- Loading/error/empty states handled
- Items are tappable with inline expand and quick action buttons (defer, archive, add next action)
  </done>
</task>

<task type="auto">
  <name>Task 2: Session persistence + resume prompt + orb badge + retention cleanup</name>
  <files>
    src/storage/review-session.ts
    src/ui/signals/store.ts
    src/ui/components/AIOrb.tsx
  </files>
  <action>
**1. Create review session persistence module (`src/storage/review-session.ts`):**

Follow the `src/storage/ai-settings.ts` pattern exactly — direct Dexie config table access from main thread.

```typescript
/**
 * Review session persistence — stores/loads review state via Dexie config table.
 *
 * Session is a single JSON blob under the 'review-session' config key.
 * Only one active session at a time.
 *
 * Phase 6: AIRV-05
 */
import { db } from './db';
import type { BriefingResult } from '../ai/analysis';

export const REVIEW_SESSION_KEY = 'review-session';
export const REVIEW_SESSION_STALE_MS = 24 * 60 * 60 * 1000; // 24 hours

export interface ReviewSession {
  briefingResult: BriefingResult;
  expandedItemIds: string[];
  addressedItemIds: string[];
  scrollPosition: number;
  startedAt: number;       // Unix ms
  lastActiveAt: number;    // Unix ms — updated on each interaction
}

export async function saveReviewSession(session: ReviewSession): Promise<void> {
  await db.config.put({ key: REVIEW_SESSION_KEY, value: session });
}

export async function loadReviewSession(): Promise<ReviewSession | null> {
  const entry = await db.config.get(REVIEW_SESSION_KEY);
  return (entry?.value as ReviewSession) ?? null;
}

export async function clearReviewSession(): Promise<void> {
  await db.config.delete(REVIEW_SESSION_KEY);
}
```

**2. Wire session persistence into store.ts (`src/ui/signals/store.ts`):**

a) Add `reviewSession` to BinderState interface:
```typescript
// Phase 6: Review session persistence (AIRV-05)
reviewSession: ReviewSession | null;
```

Default to `null` in initialState.

Import the ReviewSession type and the persistence functions:
```typescript
import type { ReviewSession } from '../../storage/review-session';
import { saveReviewSession, loadReviewSession, clearReviewSession, REVIEW_SESSION_STALE_MS } from '../../storage/review-session';
```

b) Hydrate reviewSession on app startup. In the READY handler, after the aiSettings hydration block, add:
```typescript
// Phase 6: hydrate review session from Dexie
loadReviewSession().then((session) => {
  if (session) {
    setState('reviewSession', session);
    // Also restore briefing from session for immediate rendering
    setState('reviewBriefing', session.briefingResult);
    setState('reviewStatus', 'ready');
  }
});
```

Note: We load directly from main thread (not via worker READY payload) to avoid adding complexity to the worker. This is consistent with how other UI state is managed — the load happens asynchronously after READY.

c) In `startReviewBriefing`, after the briefing is ready and the analysis atom is created, save the session:
```typescript
// After setState('reviewBriefing', result) and CREATE_ATOM:
const session: ReviewSession = {
  briefingResult: result,
  expandedItemIds: [],
  addressedItemIds: [],
  scrollPosition: 0,
  startedAt: Date.now(),
  lastActiveAt: Date.now(),
};
setState('reviewSession', session);
await saveReviewSession(session);
```

d) Create a function to update session state (called by ReviewBriefingView when items are expanded/addressed/scrolled):
```typescript
export async function updateReviewSession(updates: Partial<ReviewSession>): Promise<void> {
  const current = state.reviewSession;
  if (!current) return;
  const updated = { ...current, ...updates, lastActiveAt: Date.now() };
  setState('reviewSession', updated);
  await saveReviewSession(updated);
}

export async function finishReviewSession(): Promise<void> {
  setState('reviewSession', null);
  setState('reviewBriefing', null);
  setState('reviewStatus', 'idle');
  await clearReviewSession();
}
```

Export `updateReviewSession` and `finishReviewSession`.

e) Add briefing retention cleanup. Create a helper that prunes old analysis atoms before creating a new one. Call this inside `startReviewBriefing` BEFORE the CREATE_ATOM command:
```typescript
// Retention: keep only 4 most recent review briefings (CONTEXT.md decision)
async function pruneOldBriefings(): Promise<void> {
  const { db } = await import('../../storage/db');
  const allAnalysis = await db.atoms
    .where('type').equals('analysis')
    .sortBy('created_at');
  // Keep the 3 most recent (we're about to create a 4th, total = 4)
  const toDelete = allAnalysis.slice(0, Math.max(0, allAnalysis.length - 3));
  for (const a of toDelete) {
    sendCommand({ type: 'DELETE_ATOM', payload: { id: a.id } });
  }
}
```

Call `await pruneOldBriefings()` before the CREATE_ATOM in startReviewBriefing.

**3. Add orb badge dot for pending review (`src/ui/components/AIOrb.tsx`):**

Import reviewSession-related state:
```typescript
// Already imported: state from store
```

Add a derived function for pending review detection:
```typescript
const hasPendingReview = () => {
  const session = state.reviewSession;
  if (!session) return false;
  return true; // Show badge for both recent and stale sessions
};
```

In the JSX, add the badge dot inside the orb div (after the img, before the error message):
```tsx
{/* Review-pending badge dot */}
<Show when={hasPendingReview() && orbState() !== 'expanded'}>
  <span class="ai-orb-review-badge" />
</Show>
```

Update the `primaryAction` function to prioritize review resume:
```typescript
const primaryAction = () => {
  // If pending review exists, review is always primary (unless on inbox where triage takes priority)
  if (state.reviewSession && state.activePage !== 'inbox') return 'review';
  switch (state.activePage) {
    case 'inbox': return 'triage';
    case 'today':
    case 'this-week': return 'review';
    case 'all':
    case 'active-projects': return 'compress';
    default: return 'discuss';
  }
};
```

Update the `handleMenuAction` 'review' case to handle resume vs fresh:
```typescript
if (action === 'review') {
  setOrbState('idle');
  if (state.reviewSession) {
    // Resume: restore briefing from session and navigate
    setState('reviewBriefing', state.reviewSession.briefingResult);
    setState('reviewStatus', 'ready');
    setActivePage('review');
  } else {
    // Fresh: generate new briefing
    startReviewBriefing();
  }
  return;
}
```

Import `setState` and `setActivePage` from store (setState may need to be added to the import).

**4. Update ReviewBriefingView to persist session changes:**

In the ReviewBriefingView (created in Task 1), wire the session persistence:

- When an item is expanded/collapsed, call `updateReviewSession({ expandedItemIds: [...expandedIds()] })`.
- When an item is addressed (quick action used), call `updateReviewSession({ addressedItemIds: [...addressedIds()] })`.
- When scrolling, debounce and call `updateReviewSession({ scrollPosition: scrollRef.scrollTop })`. Use a 500ms debounce.
- On mount, if `state.reviewSession` exists, restore expandedItemIds, addressedItemIds, and scrollPosition from the session.
- Show a "Data may be outdated" warning banner if session is older than 24 hours: `Date.now() - state.reviewSession.startedAt > REVIEW_SESSION_STALE_MS`. Include a "Start Fresh" button that calls `finishReviewSession()` then `startReviewBriefing()`.
- Add a "Finish Review" button at the bottom that calls `finishReviewSession()` and navigates to inbox.
  </action>
  <verify>
- `npx tsc --noEmit` passes
- `src/storage/review-session.ts` exports saveReviewSession, loadReviewSession, clearReviewSession, ReviewSession
- Grep `state.reviewSession` in AIOrb.tsx confirms badge dot wiring
- Grep `saveReviewSession` in store.ts confirms persistence on briefing complete
- Grep `loadReviewSession` in store.ts confirms hydration on READY
- Grep `REVIEW_SESSION_STALE_MS` in review-session.ts confirms 24h constant
- Grep `pruneOldBriefings` in store.ts confirms retention cleanup
  </verify>
  <done>
- ReviewSession type defined with briefingResult, expandedItemIds, addressedItemIds, scrollPosition, startedAt, lastActiveAt
- Session saved to Dexie config table on briefing completion and on each user interaction
- Session loaded on app startup and hydrated into store
- Orb shows badge dot when pending review exists
- Orb Review action resumes existing session or starts fresh
- ReviewBriefingView restores expanded items, addressed items, and scroll position from session
- Stale session (>24h) shows warning banner with "Start Fresh" option
- Retention: only 4 most recent briefings kept, older auto-deleted
- "Finish Review" button clears session and navigates away
  </done>
</task>

</tasks>

<verification>
1. TypeScript compilation passes (`npx tsc --noEmit`)
2. ReviewBriefingView renders a full-screen briefing with frosted glass cards
3. MainPane routes 'review' to ReviewBriefingView
4. Session saves to Dexie config table on briefing complete
5. Session loads on app startup; resume restores full state
6. Orb badge dot visible when session exists
7. Quick actions (defer, archive) work inline without leaving the briefing
8. Stale session shows warning; "Start Fresh" regenerates
9. Retention cleanup keeps only 4 most recent briefings
</verification>

<success_criteria>
- Full-screen review briefing view renders with summary, sectioned frosted glass cards, metadata chips, and inline quick actions
- Session persists and resumes within 24 hours with complete state restoration
- Orb indicates pending review with badge dot
- Analysis artifacts are visually distinct from user content
- Older briefings auto-deleted (keep 4)
</success_criteria>

<output>
After completion, create `.planning/phases/06-review-pre-analysis/06-02-SUMMARY.md`
</output>
